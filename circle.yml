--- 
machine: 
  build: ~
  docker: 
    - 
      image: "docker:17.09.0-ce-git"
  jobs: ~
  steps: 
    - checkout
    - setup_remote_docker
    - 
      run: 
        command: |
            name: Install dependencies
      command: |
        apk add --no-cache \
          py-pip=9.0.0-r1
        pip install \
          docker-compose==1.12.0 \
          awscli==1.11.76
        name: "Install dependencies"
    - 
      restore_cache: 
        keys: 
          - "v1-{{.Branch}}"
        paths: 
          - /cache/app.tar
    - 
      run: 
        command: |
            set +o pipfail
            docker load -i /cache/app.tar | true
        name: "Load Docker Image layer Cache"
    - 
      run: 
        command: "docker build --cache-from=app -t app .\n"
        name: "Build Image"
    - 
      run: 
        command: "python --version\n"
        name: "Test Case"
  working_directory: /app

 
